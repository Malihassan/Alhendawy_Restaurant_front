<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        #mymap{
            width:600px;
            height:600px;
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyB90FxtYG_ybAYXGkz0ybkmkboE2nEbezI"></script>
    <script>
        window.addEventListener('load', function () {
            mymap = document.getElementById('mymap');
        });//end of load
        function getlocationdata() {
            //1- check availability of geolocation inside user browser (navigator)
            if (navigator.geolocation) {
                // available
                //2- Take permission from user to access location using getCurrentPosition(successcallback,errorcallback)
                alert("succ")
                navigator.geolocation.getCurrentPosition(getposition,errorhandeler);
            } else {
                // not available
                mymap.innerText = "Sorry , update your brower and try again later .... !";
            }
        }
        function getposition(position) {
            alert("success");
            // latitude , longitude , timestamp
            //console.log(arguments[0]);
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            var latlon = lat + " , " + lon;
            mymap.innerText = latlon;
            alert(latlon);
            // steps of dealing with google
            //1- create google latlng object (lat,lon)
            var location = new google.maps.LatLng(lat, lon);
            //2- create specs {zoom: , center :}
            var myspecs = { zoom: 17, center: location };
            //3- display map
            new google.maps.Map(mymap, myspecs);

            // add marker
            initMap(lat,lon);

        }

        function initMap(la,ln) {
          const myLatLng = { lat: la, lng: ln };
          const map = new google.maps.Map(document.getElementById("mymap"), {
            zoom: 17,
            center: myLatLng,
          });
          new google.maps.Marker({
            position: myLatLng,
            map,
            title: "New Marker",
          });
        }
        function errorhandeler(error) {
            alert("error");
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    mymap.innerText = "you refused Request !... ";
                    break;
                case error.POSITION_UNAVAILABLE:
                    mymap.innerText = "POSITION_UNAVAILABLE";
                    break;
                case error.TIMEOUT:
                    mymap.innerText = "TIMEOUT";
                    break;
                case error.UNKOWN_ERROR:
                    mymap.innerText = "UNKOWN_ERROR";
                    break;
                default:
            }
        }
    </script>
</head>
<body>
    <input type="button" value="Get Location" onclick="getlocationdata()"/>
    <div id="mymap">

    </div>
</body>
</html>
